<div>
    <style>
        /* Base Styles */
.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem 1rem;
}

.grid-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-top: 2rem;
}

@media (min-width: 1280px) {
    .grid-layout {
        grid-template-columns: 1fr 1fr;
    }
}

/* Card Styles */
.card {
    background-color: #fff;
    border-radius: 0.5rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border: 1px solid #e2e8f0;
}

.card-header {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: #1a1a1a;
}

.card-body {
    padding: 1.25rem;
}

/* Form Styles */
.form-group {
    margin-bottom: 1.25rem;
}

.form-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
    color: #374151;
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #e2e8f0;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    transition: all 0.15s ease-in-out;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: #4299e1;
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
}

/* Button Styles */
.button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease-in-out;
}

.button-primary {
    background-color: #3b82f6;
    color: #fff;
    border: none;
}

.button-primary:hover {
    background-color: #2563eb;
}

.button-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Modal Styles */
.modal-backdrop {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 40;
}

.modal-container {
    position: fixed;
    inset: 0;
    z-index: 50;
    overflow-y: auto;
}

.modal-content {
    background-color: white;
    border-radius: 0.5rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    max-width: 42rem;
    margin: 4rem auto;
    padding: 1.5rem;
}

/* Checkbox Styles */
.checkbox-list {
    border: 1px solid #e2e8f0;
    border-radius: 0.375rem;
    max-height: 15rem;
    overflow-y: auto;
}

.checkbox-item {
    display: flex;
    align-items: flex-start;
    padding: 0.75rem;
    border-bottom: 1px solid #e2e8f0;
    transition: background-color 0.15s ease-in-out;
}

.checkbox-item:last-child {
    border-bottom: none;
}

.checkbox-item:hover {
    background-color: #f8fafc;
}

/* Assignment Item Styles */
.assignment-item {
    background-color: #ffffff;
    border-radius: 0.5rem;
    padding: 1.25rem;
    margin-bottom: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border: 1px solid #e5e7eb;
}

.assignment-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #e5e7eb;
}

/* Status Badge Styles */
.status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.375rem 1rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.025em;
}

.status-active {
    background-color: #ecfdf5;
    color: #047857;
    border: 1px solid #6ee7b7;
}

.status-completed {
    background-color: #eff6ff;
    color: #1d4ed8;
    border: 1px solid #93c5fd;
}

/* Delete Button Style */
.delete-button {
    display: inline-flex;
    align-items: center;
    padding: 0.375rem 0.75rem;
    background-color: #fee2e2;
    color: #dc2626;
    border: 1px solid #fca5a5;
    border-radius: 0.375rem;
    font-size: 0.75rem;
    font-weight: 500;
    transition: all 0.15s ease-in-out;
}

.delete-button:hover {
    background-color: #fecaca;
    border-color: #ef4444;
}

/* Error Message Style */
.error-message {
    color: #dc2626;
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

/* Empty State Style */
.empty-state {
    padding: 3rem 2rem;
    text-align: center;
    background: #f8fafc;
    border-radius: 0.75rem;
    border: 2px dashed #e5e7eb;
}

.empty-message {
    color: #6b7280;
    font-size: 0.875rem;
}

/* Notification Styles */
.notification {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 50;
    padding: 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.notification-success {
    background-color: #f0fdf4;
    border: 1px solid #86efac;
    color: #166534;
}

.notification-error {
    background-color: #fef2f2;
    border: 1px solid #fca5a5;
    color: #991b1b;
}

/* Alpine.js Utility */
[x-cloak] {
    display: none !important;
}

/* Container Assignment Modal Specific Styles */
.modal-container-assignment {
    max-width: 42rem;
    margin: 2rem auto;
}

.container-list {
    max-height: 60vh;
    overflow-y: auto;
    padding-right: 0.5rem;
}

.container-item {
    background-color: #f9fafb;
    border-radius: 0.5rem;
    padding: 1rem;
    margin-bottom: 0.75rem;
}

.container-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
}

.day-selection {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 0.5rem;
}

.day-checkbox {
    display: flex;
    align-items: center;
    padding: 0.5rem;
    background-color: white;
    border-radius: 0.375rem;
    border: 1px solid #e5e7eb;
}

/* Animation Keyframes */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        transform: translateY(10px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Responsive Adjustments */
@media (max-width: 640px) {
    .grid-layout {
        grid-template-columns: 1fr;
    }

    .modal-content {
        margin: 1rem;
    }

    .day-selection {
        grid-template-columns: 1fr;
    }
}
    </style>
    <!-- In your layout file -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <!-- Your existing styles here -->
    <style>
        [x-cloak] {
            display: none !important;
        }
        /* ... (keep all your existing styles) ... */
    </style>

    <div class="container">
        <!-- Delete Confirmation Modal -->
        <div x-data="{ showConfirmDelete: false }" @confirm-delete.window="showConfirmDelete = true" class="relative">
            <div x-show="showConfirmDelete" x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0" class="fixed inset-0 z-50 overflow-y-auto" style="display: none;">

                <!-- Overlay -->
                <div class="fixed inset-0 transition-opacity bg-black bg-opacity-50" x-show="showConfirmDelete"
                    @click="showConfirmDelete = false">
                </div>

                <!-- Modal -->
                <div class="flex items-center justify-center min-h-screen p-4">
                    <div x-show="showConfirmDelete" x-transition:enter="transition ease-out duration-300"
                        x-transition:enter-start="opacity-0 transform translate-y-4"
                        x-transition:enter-end="opacity-100 transform translate-y-0"
                        x-transition:leave="transition ease-in duration-200"
                        x-transition:leave-start="opacity-100 transform translate-y-0"
                        x-transition:leave-end="opacity-0 transform translate-y-4"
                        @click.away="showConfirmDelete = false"
                        class="relative w-full max-w-md p-6 mx-auto bg-white rounded-lg shadow-xl">

                        <!-- Header -->
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">
                                Confirm Deletion
                            </h3>
                            <button @click="showConfirmDelete = false" class="text-gray-400 hover:text-gray-500">
                                <i class="flaticon-close"></i>
                            </button>
                        </div>

                        <!-- Content -->
                        <div class="mt-2 text-center">
                            <h3 class="mb-2 text-lg font-medium text-gray-900">
                                Delete Assignment
                            </h3>
                            <p class="text-sm text-gray-500">
                                Are you sure you want to delete the selected container assignment(s)? This action cannot
                                be undone.
                            </p>
                        </div>

                        <!-- Buttons -->
                        <div class="flex justify-end gap-3 mt-6">
                            <button @click="showConfirmDelete = false"
                                class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                Cancel
                            </button>
                            <button style="background-color: red; color:white" wire:click="deleteAssignment" @click="showConfirmDelete = false"
                                class="px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Container Assignment Modal -->
        <div x-data="{ show: false }" 
             @open-container-modal.window="show = true" 
             @close-container-modal.window="show = false">
            
            <div x-show="show" 
                 x-cloak
                 class="fixed inset-0 z-50 overflow-y-auto" 
                 aria-labelledby="modal-title" 
                 role="dialog" 
                 aria-modal="true">
                
                <!-- Background backdrop -->
                <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"
                     x-show="show"
                     x-transition:enter="ease-out duration-300"
                     x-transition:enter-start="opacity-0"
                     x-transition:enter-end="opacity-100"
                     x-transition:leave="ease-in duration-200"
                     x-transition:leave-start="opacity-100"
                     x-transition:leave-end="opacity-0">
                </div>

                <!-- Modal panel -->
                <div class="fixed inset-0 z-10 overflow-y-auto">
                    <div class="flex items-end justify-center min-h-full p-4 text-center sm:items-center sm:p-0">
                        <div x-show="show"
                             x-transition:enter="ease-out duration-300"
                             x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                             x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                             x-transition:leave="ease-in duration-200"
                             x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                             x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                             class="relative px-4 pt-5 pb-4 overflow-hidden text-left transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:w-full sm:max-w-4xl sm:p-6"
                             @click.away="show = false">

                            @if($selectedContractForAssignment)
                            <!-- Modal header -->
                            <div class="flex items-start justify-between mb-5">
                                <div>
                                    <h3 class="text-lg font-medium text-gray-900">
                                        Assign Containers to Days
                                    </h3>
                                    <p class="mt-1 text-sm text-gray-600">
                                        Contract: {{ $selectedContractForAssignment['contract_number'] }} - 
                                        {{ $selectedContractForAssignment['client_name'] }}
                                    </p>
                                </div>
                                <button @click="show = false" class="text-gray-400 hover:text-gray-500">
                                    <span class="sr-only">Close</span>
                                    <i class="flaticon-close"></i>
                                </button>
                            </div>

                            <!-- Container list -->
                            <div class="mt-4 space-y-4 max-h-[60vh] overflow-y-auto">
                                @foreach($selectedContractForAssignment['containers'] as $index => $container)
                                <div class="p-4 bg-white border border-gray-200 rounded-lg">
                                    <div class="flex items-center justify-between mb-3">
                                        <div>
                                            <span class="text-base font-medium text-gray-900">
                                                {{ $container['container_code'] }}
                                            </span>
                                            <span class="ml-2 text-sm text-gray-500">
                                                Size: {{ $container['container_size'] }}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-3">
                                        <p class="mb-2 text-sm font-medium text-gray-700">Assign to days:</p>
                                        <div class="grid grid-cols-2 gap-3">
                                            @foreach($assignmentDays as $day)
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox"
                                                       wire:model="containerAssignments.{{ $container['id'] }}"
                                                       value="{{ $day }}"
                                                       class="text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                                <span class="text-sm text-gray-700">
                                                    {{ \Carbon\Carbon::parse($day)->format('l, F j, Y') }}
                                                </span>
                                            </label>
                                            @endforeach
                                        </div>
                                    </div>
                                </div>
                                @endforeach
                            </div>

                            <!-- Modal footer -->
                            <div class="flex justify-end mt-5 space-x-3 sm:mt-6">
                                <button type="button"
                                        @click="show = false"
                                        class="inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                    Cancel
                                </button>
                                <button type="button"
                                        wire:click="assignContainers"
                                        wire:loading.attr="disabled"
                                        class="inline-flex justify-center px-4 py-2 text-sm font-medium text-black border border-transparent rounded-md shadow-sm bg-gradient-to-r from-yellow-400 via-red-500 to-pink-600 hover:from-yellow-500 hover:via-red-600 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                                    <span wire:loading.remove wire:target="assignContainers">
                                        Assign Containers
                                    </span>
                                    <span wire:loading wire:target="assignContainers">
                                        Processing...
                                    </span>
                                </button>
                            </div>
                            @else
                            <div class="py-4 text-center">
                                <p class="text-gray-500">No contract selected for assignment.</p>
                            </div>
                            @endif
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Flash Messages -->
        @if (session()->has('success'))
        <div class="fixed px-4 py-2 text-green-700 bg-green-100 border border-green-400 rounded-md shadow-sm top-4 right-4"
            x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 3000)">
            {{ session('success') }}
        </div>
        @endif

        @if (session()->has('error'))
        <div class="fixed px-4 py-2 text-red-700 bg-red-100 border border-red-400 rounded-md shadow-sm top-4 right-4"
            x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 3000)">
            {{ session('error') }}
        </div>
        @endif

        <!-- Back Button -->
        <div class="mb-6">
            <a href="{{ route('admin.dispatch.assignments') }}"
                class="inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase transition duration-150 ease-in-out bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                Back to Assignments
            </a>
        </div>

        <div class="grid-layout">
            <!-- Current Assignments Section -->
            <div class="card">
                <header class="card-header">
                    <h2 class="card-title">Current Assignments</h2>
                    <button wire:click="toggleCurrentAssignments">
                        <span class="sr-only">Show/Hide</span>
                        <i class="flaticon-down-arrow"></i>
                    </button>
                </header>

                @if($showCurrentAssignments)
                <div class="card-body">
                    <!-- View selector for assignments -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700">View assignments for:</label>
                        <select wire:model.live="selectedDay" class="mt-1 form-select">
                            @foreach($assignmentDays as $day)
                            <option value="{{ $day }}">
                                {{ \Carbon\Carbon::parse($day)->format('l, F j, Y') }}
                            </option>
                            @endforeach
                        </select>
                    </div>

                    @forelse($currentAssignments as $contract)
                    <div class="assignment-item" wire:key="assignment-{{ $contract->id }}">
                        <!-- Contract Header -->
                        <div class="assignment-header">
                            <div class="contract-info">
                                <div class="contract-number">{{ $contract->contract_number }}</div>
                                <div class="client-name">{{ $contract->client_name }}</div>
                            </div>
                            <button wire:click="confirmDeleteAssignment({{ $contract->id }})"
                                class="delete-button">
                                <i class="flaticon-delete"></i>
                                Delete All
                            </button>
                        </div>

                        <!-- Assigned Containers -->
                        @if($contract->assigned_containers && $contract->assigned_containers->isNotEmpty())
                        <div class="mt-4">
                            <h4 class="mb-2 text-sm font-semibold text-gray-700">Assigned Containers:</h4>
                            <div class="space-y-3">
                                @foreach($contract->assigned_containers as $container)
                                <div class="flex items-center justify-between p-3 rounded-lg bg-gray-50">
                                    <div>
                                        <div class="font-medium">{{ $container->container_code }}</div>
                                        <div class="text-sm text-gray-600">
                                            Size: {{ $container->container_size }} | 
                                            Price: {{ number_format($container->unit_price, 2) }} | 
                                            Qty: {{ $container->quantity }}
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="px-3 py-1 text-xs font-semibold rounded-full
                                            {{ $container->status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800' }}">
                                            {{ $container->status }}
                                        </span>
                                        <button wire:click="confirmDeleteAssignment({{ $contract->id }}, {{ $container->id }})"
                                            class="delete-button">
                                            <i class="flaticon-delete"></i>
                                        </button>
                                    </div>
                                </div>
                                @endforeach
                            </div>
                        </div>
                        @endif

                        <!-- Assignment Details -->
                        <div class="pt-3 mt-4 border-t border-gray-200">
                            <div class="text-sm text-gray-600">
                                <div class="mb-1">
                                    <span class="font-medium">Assigned for:</span>
                                    {{ Carbon\Carbon::parse($contract->pivot->assignment_day)->format('l, d/m/Y') }}
                                </div>
                                @if($contract->contract_location_address)
                                <div class="flex items-center mt-1">
                                    <span class="mr-2">üìç</span>
                                    {{ $contract->contract_location_address }}
                                </div>
                                @endif
                                @if($contract->pivot->notes)
                                <div class="pt-2 mt-2 border-t border-gray-100">
                                    <span class="font-medium">Notes:</span>
                                    {{ $contract->pivot->notes }}
                                </div>
                                @endif
                            </div>
                        </div>
                    </div>
                    @empty
                    <div class="empty-state">
                        <div class="empty-message">
                            <span class="empty-message-text">No active assignments</span>
                            <span class="empty-message-subtext">Assignments will appear here once contracts are assigned</span>
                        </div>
                    </div>
                    @endforelse
                </div>
                @endif
            </div>

            <!-- New Assignment Form -->
            <div class="card">
                <header class="card-header">
                    <h2 class="card-title">New Assignment</h2>
                </header>

                <div class="card-body">
                    <!-- Search and Filter -->
                    <div class="grid grid-cols-2 gap-4 form-group">
                        <div>
                            <input wire:model.live.debounce.300ms="search" type="text" class="form-input"
                                placeholder="Search contracts...">
                        </div>
                        <div>
                            <select wire:model.live="filterContractStatus" class="form-select">
                                <option value="Active">Active Contracts</option>
                                <option value="All">All Contracts</option>
                            </select>
                        </div>
                    </div>

                    <!-- Contract Selection -->
                    @if($availableContracts && $availableContracts->count() > 0)
                    <div class="form-group">
                        <label class="form-label">Select Contracts</label>
                        <div class="checkbox-list">
                            @foreach($availableContracts as $contract)
                            <label class="checkbox-item">
                                <input type="checkbox" 
                                       wire:model.live="selectedContracts" 
                                       value="{{ $contract->id }}"
                                       wire:loading.attr="disabled">
                                <span class="ml-3">
                                    <span class="font-medium">{{ $contract->contract_number }}</span>
                                    <div class="text-sm text-gray-600">
                                        Client: {{ $contract->client_name }}
                                        <div class="mt-1">
                                            <strong>Available Containers:</strong>
                                            <ul class="ml-4 list-disc">
                                                @foreach($contract->contractDetails as $container)
                                                <li>
                                                    {{ $container->container_code }}
                                                    (Size: {{ $container->container_size }},
                                                    Qty: {{ $container->quantity }})
                                                </li>
                                                @endforeach
                                            </ul>
                                        </div>
                                    </div>
                                </span>
                            </label>
                            @endforeach
                        </div>
                        @error('selectedContracts')
                        <div class="error-message">{{ $message }}</div>
                        @enderror
                    </div>
                    @else
                    <div class="empty-message">
                        <span class="empty-message-text">No available contracts</span>
                        <span class="empty-message-subtext">No contracts available for assignment on this date</span>
                    </div>
                    @endif

                    <!-- Assignment Days -->
                    <div class="form-group">
                        <label class="form-label">Assignment Days</label>
                        <div class="space-y-2">
                            @foreach($assignmentDays as $index => $day)
                            <div class="flex items-center space-x-2">
                                <input type="date" 
                                       wire:model.live="assignmentDays.{{ $index }}" 
                                       class="flex-1 form-input" 
                                       min="{{ date('Y-m-d') }}"
                                       wire:loading.attr="disabled">
                                
                                @if($index === 0)
                                <button type="button" 
                                        wire:click="addAssignmentDay"
                                        class="px-2 py-1 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    <i class="flaticon-add"></i>
                                </button>
                                @else
                                <button type="button"
                                        wire:click="removeAssignmentDay({{ $index }})"
                                        class="px-2 py-1 text-sm font-medium text-white bg-red-600 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                    <i class="flaticon-close"></i>
                                </button>
                                @endif
                            </div>
                            @endforeach
                        </div>
                        @error('assignmentDays') <div class="error-message">{{ $message }}</div> @enderror
                        @error('assignmentDays.*') <div class="error-message">{{ $message }}</div> @enderror
                    </div>

                    <!-- Notes -->
                    <div class="form-group">
                        <label class="form-label">Notes (Optional)</label>
                        <textarea wire:model="notes" 
                                  rows="3" 
                                  class="form-textarea"
                                  placeholder="Add any additional notes..." 
                                  wire:loading.attr="disabled"></textarea>
                        @error('notes') <div class="error-message">{{ $message }}</div> @enderror
                    </div>

                    <!-- Submit Button -->
                    <div class="text-right form-group">
                        <button wire:click="assignContracts"
                                class="button button-primary"
                                wire:loading.attr="disabled"
                                wire:loading.class="opacity-75"
                                @if(!$availableContracts || $availableContracts->count() === 0) disabled @endif>
                            <span wire:loading.remove wire:target="assignContracts">
                                @if(!$availableContracts || $availableContracts->count() === 0)
                                    No Contracts Available
                                @else
                                    Assign Selected Contracts
                                @endif
                            </span>
                            <span wire:loading wire:target="assignContracts">
                                Processing...
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @push('scripts')
    <script>
        document.addEventListener('livewire:initialized', () => {
            $(document).ready(function() {
                $('.form-select').select2({
                    placeholder: 'Select contracts',
                    allowClear: true
                });

                $('.form-select').on('change', function (e) {
                    @this.set('selectedContracts', $(this).val());
                });
            });
        });

        document.querySelectorAll('.action-button, .play-button, .social-link').forEach(button => {
        button.addEventListener('touchstart', function() {
            this.style.opacity = '0.7';
        });
        
        button.addEventListener('touchend', function() {
            this.style.opacity = '1';
        });
    });

    // Improve volume control for touch devices
    const volumeControl = document.querySelector('.volume-control');
    volumeControl.addEventListener('touchmove', (e) => {
        e.preventDefault();
        const touch = e.touches[0];
        const rect = volumeControl.getBoundingClientRect();
        let position = (touch.clientX - rect.left) / rect.width;
        position = Math.max(0, Math.min(1, position));
        volumeLevel.style.width = `${position * 100}%`;
    });

    // Add passive event listeners for better scroll performance
    document.addEventListener('touchstart', function() {}, {passive: true});
    document.addEventListener('touchmove', function() {}, {passive: true});
    </script>
    @endpush
</div>
